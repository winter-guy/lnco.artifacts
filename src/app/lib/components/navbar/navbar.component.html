<!-- eslint-disable @angular-eslint/template/label-has-associated-control -->
<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->
<header class="relative h-48" *ngIf="$navbarState | async as state">
    <div (click)="toggleDynamicComponent()"
    class="absolute z-20 h-screen w-screen bg-black/40 hidden" [class.!block]="inSearch"></div>
    <div class="w-full relative flex justify-center z-30 ">
        <div class="md:px-8 py-8 absolute w-[-webkit-fill-available] z-50 bg-white dark:bg-black">
            <div class="h-auto flex justify-between items-start">
                <app-logo class="flex-1"></app-logo>
                <nav class="flex items-center !transition-all !duration-300 !ease-in-out select-none cursor-pointer">
                    <ul mat-typography
                        [ngClass]="{'w-auto h-auto': !inSearch, 'w-[500px] text-xs h-16': inSearch}"
                        class="flex rounded-full bg-white/90 text-sm items-center justify-between font-normal hover:shadow-sm shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10">
                        <li class="flex-1 flex items-center h-full rounded-full ml-4"
                            [ngClass]="{'flex-col !justify-center !items-start pl-4 ml-0 hover:bg-gray-100 dark:hover:bg-zinc-900': inSearch}">
                            <a class="relative block px-3"
                            [class.py-3]="!inSearch" [class.hidden]="inSearch">Where?</a>
                            <div class="relative w-full h-10" [class.hidden]="!inSearch">
                                <input aria-label="Where" class=" focus:border-transparent outline-transparent border-transparent focus:ring-transparent peer h-full bg-transparent text-blue-gray-700 font-sans font-normal transition-all text-sm rounded-full"
                                  placeholder="" />
                                <label
                                  class="flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 before:rounded-tl-md before:pointer-events-none before:transition-all after:content[' '] after:block after:flex-grow after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 after:rounded-tr-md after:pointer-events-none after:transition-all peer-placeholder-shown:leading-[3.75]">
                                  Search city
                                </label>
                            </div> 
                        </li>
                        <li class="flex-1 flex items-center h-full rounded-full ml-4"
                        [ngClass]="{'flex-col !justify-center !items-start pl-4 ml-0  hover:bg-gray-100 dark:hover:bg-zinc-900': inSearch}">
                            <a class="relative block px-3"
                            [class.py-3]="!inSearch" [class.hidden]="inSearch">Span</a>
                            <div class="relative w-full h-10" [class.hidden]="!inSearch">
                                <input aria-label="stay" class=" focus:border-transparent outline-transparent border-transparent focus:ring-transparent peer h-full bg-transparent text-blue-gray-700 font-sans font-normal transition-all text-sm rounded-full"
                                  placeholder="" />
                                <label
                                  class="flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 before:rounded-tl-md before:pointer-events-none before:transition-all after:content[' '] after:block after:flex-grow after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 after:rounded-tr-md after:pointer-events-none after:transition-all peer-placeholder-shown:leading-[3.75]">
                                  Duration
                                </label>
                            </div> 
                        </li>
                        <li class="flex-1 flex items-center h-full justify-between hover:bg-gray-100 min-w-28 rounded-full dark:hover:bg-zinc-900">
                            <a class="relative block px-3">Guests</a>
                            <button [ngClass]="{'!w-14 !m-2': inSearch}"
                                class="disabled:opacity-50 w-9 m-1 bg-red-500 text-white h-9 p-2.5 inline-flex items-center justify-center space-x-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-black dark:focus:ring-white focus:z-10 shrink-0 saturate-[110%] focus:ring-slate-500 hover:bg-red-600 text-sm font-medium rounded-full dark:text-slate-50"
                                title="light">
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                        class="w-5 h-5">
                                        <path fill-rule="evenodd"
                                            d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </span>
                            </button>
                        </li>
            
                    </ul>
                </nav>
                <nav class="flex items-center space-x-2 flex-1 justify-end">
                    <button data-cy="light-button"
                        class="disabled:opacity-50 border border-base border-light transition inline-flex items-center justify-center space-x-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-black dark:focus:ring-white focus:z-10 shrink-0 saturate-[110%] focus:ring-slate-500 bg-white text-slate-900 hover:bg-slate-50 p-1.5 text-sm font-medium rounded-full dark:bg-transparent dark:text-slate-50"
                        (click)="handleThemeChange()" title="light">
                        <span>
                            <svg data-testid="geist-icon" height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16"
                                *ngIf="currentTheme === 'light'; else dark"
                                style="width: 16px; height: 16px; color: currentcolor;">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M5.82804 1.8717C3.30641 2.76542 1.5 5.17204 1.5 8.0001C1.5 11.5899 4.41015 14.5001 8 14.5001C10.8282 14.5001 13.2348 12.6936 14.1285 10.1718C13.3293 10.5427 12.4386 10.7499 11.5 10.7499C8.04822 10.7499 5.25 7.95172 5.25 4.49994C5.25 3.56144 5.45718 2.67078 5.82804 1.8717ZM0 8.0001C0 3.78268 3.26298 0.328073 7.40265 0.0220947L8.009 1.27881C7.22684 2.12601 6.75 3.25644 6.75 4.49994C6.75 7.12329 8.87665 9.24994 11.5 9.24994C12.7436 9.24994 13.8741 8.77304 14.7213 7.99079L15.978 8.59708C15.6722 12.7369 12.2175 16.0001 8 16.0001C3.58172 16.0001 0 12.4184 0 8.0001Z"
                                    fill="currentColor">
                                </path>
                            </svg>
                            <ng-template #dark>
                                <svg data-testid="geist-icon" height="16" stroke-linejoin="round" viewBox="0 0 16 16"
                                    width="16" style="width: 16px; height: 16px; color: currentcolor;">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M8.75 0.75V0H7.25V0.75V2V2.75H8.75V2V0.75ZM11.182 3.75732L11.7123 3.22699L12.0659 2.87344L12.5962 2.34311L13.6569 3.40377L13.1265 3.9341L12.773 4.28765L12.2426 4.81798L11.182 3.75732ZM8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5ZM8 12C10.2091 12 12 10.2091 12 8C12 5.79086 10.2091 4 8 4C5.79086 4 4 5.79086 4 8C4 10.2091 5.79086 12 8 12ZM13.25 7.25H14H15.25H16V8.75H15.25H14H13.25V7.25ZM0.75 7.25H0V8.75H0.75H2H2.75V7.25H2H0.75ZM2.87348 12.0659L2.34315 12.5962L3.40381 13.6569L3.93414 13.1265L4.28769 12.773L4.81802 12.2426L3.75736 11.182L3.22703 11.7123L2.87348 12.0659ZM3.75735 4.81798L3.22702 4.28765L2.87347 3.9341L2.34314 3.40377L3.4038 2.34311L3.93413 2.87344L4.28768 3.22699L4.81802 3.75732L3.75735 4.81798ZM12.0659 13.1265L12.5962 13.6569L13.6569 12.5962L13.1265 12.0659L12.773 11.7123L12.2426 11.182L11.182 12.2426L11.7123 12.773L12.0659 13.1265ZM8.75 13.25V14V15.25V16H7.25V15.25V14V13.25H8.75Z"
                                        fill="currentColor">
                                    </path>
                                </svg>
                            </ng-template>
                        </span>
                    </button>
                    <ng-container *ngIf="auth.isAuthenticated$ | async; else login" class="flex space-x-2" cdkMenuBar>
                        <button data-cy="logout-button"
                            class="disabled:opacity-50 transition inline-flex items-center justify-center space-x-1.5 border focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-black dark:focus:ring-white focus:z-10 shrink-0 saturate-[110%] border-btn focus:ring-slate-500 bg-white text-slate-900 hover:bg-slate-50 px-3 p-1.5 text-sm font-medium rounded-full dark:bg-transparent dark:text-slate-50"
                            (click)="onBtnActionClicked()">
                            <span>contribute</span>
                        </button>
                    </ng-container>
                    <ng-template #login>
                        <button data-cy="logout-button"
                            class="disabled:opacity-50 transition inline-flex items-center justify-center space-x-1.5 border focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-black dark:focus:ring-white focus:z-10 shrink-0 saturate-[110%] border-btn focus:ring-slate-500 bg-white text-slate-900 hover:bg-slate-50 px-3 p-1.5 text-sm font-medium rounded-full dark:bg-transparent dark:text-slate-50"
                            (click)="loginWithRedirect()">
                            <span>sign in</span>
                        </button>
                    </ng-template>
                </nav>
            </div>
            
            <ng-template #dynamicComponentContainer class=" transition duration-300 ease-in-out"></ng-template>
    
            <div class="w-full flex justify-center relative">
                <button title="details"
                    class="absolute -bottom-12 disabled:opacity-50 border border-base border-light transition inline-flex items-center justify-center space-x-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-black dark:focus:ring-white dark:bg-black focus:z-10 shrink-0 saturate-[110%] focus:ring-slate-500 bg-white text-slate-900 hover:bg-slate-50 p-1.5 text-sm font-medium rounded-full dark:text-slate-50"
                    (click)="toggleDynamicComponent()">
                    <svg xmlns="http://www.w3.org/2000/svg" [ngClass]="{'rotate-180': this.dynamicComponentRef}"
                        viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                        <path fill-rule="evenodd"
                            d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </div>
</header>